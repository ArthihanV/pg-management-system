{% extends 'base.html' %}

{% block title %}All Bookings{% endblock %}

{% block sidebar %}
<li><a href="{% url 'dashboard' %}"><i class="fa-solid fa-chart-line"></i>Dashboard</a></li>
<li><a href="{% url 'approve_pg_owners' %}">Approve Owners</a></li>
<li><a href="{% url 'admin_users' %}">Users</a></li>
<li><a href="{% url 'admin_bookings' %}"><i class="fa-solid fa-calendar-check"></i>Bookings</a></li>
{% endblock %}

{% block content %}
<h2>All Bookings</h2>

<form method="get" class="filter-bar">
    <select name="status">
        <option value="">All</option>
        <option value="PENDING" {% if status == 'PENDING' %}selected{% endif %}>Pending</option>
        <option value="APPROVED" {% if status == 'APPROVED' %}selected{% endif %}>Approved</option>
        <option value="REJECTED" {% if status == 'REJECTED' %}selected{% endif %}>Rejected</option>
    </select>
    <button type="submit" class="btn primary">Filter</button>
</form>

<table class="table">
    <tr>
        <th>Customer</th>
        <th>PG</th>
        <th>Room</th>
        <th>Status</th>
        <th>Date</th>
    </tr>

    {% for b in bookings %}
    <tr>
        <td>{{ b.customer.username }}</td>
        <td>{{ b.room.pg.name }}</td>
        <td>{{ b.room.room_type }}</td>
        <td>
            <span class="badge {{ b.status|lower }}">
                {{ b.status }}
            </span>
        </td>
        <td>{{ b.created_at|date:"d-m-Y" }}</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
